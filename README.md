# âš¡ Flash Sale Mall - ç§’æ€å•†åŸç³»ç»Ÿ

ä¸€ä¸ªä¸“ä¸ºSREå›¢é˜Ÿè®¾è®¡çš„æ‰‹æœºç§’æ€å•†åŸç³»ç»Ÿï¼Œç”¨äºæµ‹è¯•æ•…éšœæ£€æµ‹ã€æ ¹å› åˆ†æå’Œç³»ç»Ÿæ¢å¤èƒ½åŠ›ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Flash Sale Mall æ˜¯ä¸€ä¸ªé«˜åº¦ç®€åŒ–çš„æ‰‹æœºç§’æ€å•†åŸç³»ç»Ÿï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•…éšœæ³¨å…¥å’Œç›‘æ§åˆ†æã€‚ç³»ç»Ÿæä¾›å®Œæ•´çš„ç”¨æˆ·è®¤è¯ã€å•†å“ç§’æ€ã€è®¢å•ç®¡ç†å’Œç›‘æ§åŠŸèƒ½ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18** + **TypeScript** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **TailwindCSS** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **React Router** - å®¢æˆ·ç«¯è·¯ç”±ç®¡ç†
- **Zustand** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **Lucide React** - å›¾æ ‡åº“

### åç«¯æŠ€æœ¯æ ˆï¼ˆå·²è¿ç§»ä¸ºSpring Bootï¼‰
- **Spring Boot 3.3.x** + **Java 21** - ä¼ä¸šçº§åç«¯æ¡†æ¶
- **Spring Security + JWT** - è®¤è¯æˆæƒ
- **Spring Data JPA/Hibernate** - ORMä¸æ•°æ®è®¿é—®
- **MySQL 8.0** - å…³ç³»å‹æ•°æ®åº“
- **Redis 7.0** - ç¼“å­˜ä¸é™æµ
- **Apache Kafka** - å¼‚æ­¥æ¶ˆæ¯å¤„ç†
- **Micrometer + Prometheus** - æŒ‡æ ‡é‡‡é›†
- **SkyWalking Java Agent** - é“¾è·¯è¿½è¸ª

### ç›‘æ§å’Œè¿ç»´
- **Prometheus** - æŒ‡æ ‡æ”¶é›†
- **Grafana** - å¯è§†åŒ–ç›‘æ§é¢æ¿
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Docker ä¸ Docker Composeï¼ˆåç«¯å®¹å™¨åŒ–ï¼‰
- Node.js 18+ï¼ˆæœ¬åœ°å‰ç«¯å¼€å‘å¯é€‰ï¼‰

### 1. å¯åŠ¨åŸºç¡€è®¾æ–½ä¸ç›‘æ§
```bash
# å¯åŠ¨æ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ä¸ç›‘æ§
docker compose up -d mysql redis zookeeper kafka prometheus grafana loki promtail oap skywalking-ui
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆSpring Bootå®¹å™¨ï¼‰
```bash
docker compose up -d backend
docker compose logs -f backend
```

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### 5. è®¿é—®åº”ç”¨
- å‰ç«¯åº”ç”¨: http://localhost:5173
- åç«¯API: http://localhost:3001
- Grafanaç›‘æ§: http://localhost:3000 (admin/admin123)
- Prometheus: http://localhost:9090
- SkyWalking UI: http://localhost:8080

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·ç³»ç»Ÿ
- âœ… ç”¨æˆ·ç™»å½•/è®¤è¯ (JWT)
- âœ… ä¼šè¯ç®¡ç†
- âœ… æƒé™æ§åˆ¶

### å•†å“ç§’æ€
- âœ… å•†å“å±•ç¤ºå’Œæœç´¢
- âœ… å®æ—¶å€’è®¡æ—¶
- âœ… ç§’æ€çŠ¶æ€ç®¡ç†
- âœ… åº“å­˜ç®¡ç†
- âœ… é¢‘ç‡é™åˆ¶ (10ç§’3æ¬¡)

### è®¢å•ç®¡ç†
- âœ… è®¢å•åˆ›å»º
- âœ… è®¢å•çŠ¶æ€è·Ÿè¸ª
- âœ… è®¢å•å†å²æŸ¥è¯¢

### ç›‘æ§
- âœ… å®æ—¶æ€§èƒ½æŒ‡æ ‡ï¼ˆMicrometer/Prometheusï¼‰
- âœ… QPSã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡ç›‘æ§
- âœ… å¹¶å‘ç”¨æˆ·æ•°ç»Ÿè®¡
- âœ… ç³»ç»Ÿå¥åº·æ£€æŸ¥
- âœ… é“¾è·¯è¿½è¸ªï¼ˆSkyWalkingï¼‰

## ğŸ”§ APIæ¥å£

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### å•†å“æ¥å£
- `GET /api/products` - è·å–å•†å“åˆ—è¡¨
- `GET /api/products/:id` - è·å–å•†å“è¯¦æƒ…

### ç§’æ€æ¥å£
- `POST /api/seckill` - æäº¤ç§’æ€è¯·æ±‚ (éœ€è¦è®¤è¯)

### è®¢å•æ¥å£
- `GET /api/orders` - è·å–ç”¨æˆ·è®¢å• (éœ€è¦è®¤è¯)
- `GET /api/orders/:id` - è·å–è®¢å•è¯¦æƒ… (éœ€è¦è®¤è¯)

## ğŸ¨ ç”¨æˆ·ç•Œé¢

### è®¾è®¡åŸåˆ™
- **ç§»åŠ¨ç«¯ä¼˜å…ˆ** - å“åº”å¼è®¾è®¡
- **çº¢è‰²ä¸»é¢˜** - çªå‡ºç§’æ€æ°›å›´ (#E53E3E)
- **å¡ç‰‡å¼å¸ƒå±€** - æ¸…æ™°çš„ä¿¡æ¯å±‚æ¬¡
- **å®æ—¶äº¤äº’** - æµç•…çš„ç”¨æˆ·ä½“éªŒ

### é¡µé¢ç»“æ„
1. **ç™»å½•é¡µé¢** - ç®€æ´çš„è®¤è¯ç•Œé¢
2. **ç§’æ€é¦–é¡µ** - å•†å“ç½‘æ ¼å’Œå€’è®¡æ—¶
3. **è®¢å•é¡µé¢** - è®¢å•ç®¡ç†å’ŒçŠ¶æ€è·Ÿè¸ª
4. **ç›‘æ§é¢æ¿** - å®æ—¶æŒ‡æ ‡

## ğŸ§ª æµ‹è¯•è´¦æˆ·

```
æ™®é€šç”¨æˆ·:
- ç”¨æˆ·å: testuser
- å¯†ç : test123

ç®¡ç†å‘˜:
- ç”¨æˆ·å: admin  
- å¯†ç : admin123
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### æ€§èƒ½æŒ‡æ ‡
- **QPS (Queries Per Second)** - æ¯ç§’æŸ¥è¯¢æ•°
- **å“åº”æ—¶é—´** - APIå“åº”å»¶è¿Ÿ
- **é”™è¯¯ç‡** - è¯·æ±‚å¤±è´¥ç™¾åˆ†æ¯”
- **å¹¶å‘ç”¨æˆ·æ•°** - åŒæ—¶åœ¨çº¿ç”¨æˆ·æ•°é‡

### ç³»ç»ŸçŠ¶æ€
- **æ•°æ®åº“è¿æ¥** - MySQLå¥åº·çŠ¶æ€
- **Redisç¼“å­˜** - ç¼“å­˜æœåŠ¡çŠ¶æ€
- **æ¶ˆæ¯é˜Ÿåˆ—** - KafkaæœåŠ¡çŠ¶æ€

## ğŸ” æ•…éšœæ³¨å…¥æµ‹è¯•

æ”¯æŒå¤šç§æ•…éšœç±»å‹æ¨¡æ‹Ÿï¼š
- **æ•°æ®åº“è¿æ¥æ± è€—å°½** - æµ‹è¯•æ•°æ®åº“å‹åŠ›
- **Kafkaæ¶ˆæ¯ç§¯å‹** - æµ‹è¯•æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†èƒ½åŠ›
- **ç¼“å­˜å‡»ç©¿** - æµ‹è¯•ç¼“å­˜å¤±æ•ˆåœºæ™¯
- **APIé™æµ** - æµ‹è¯•é™æµæœºåˆ¶
- **æœåŠ¡è¶…æ—¶** - æµ‹è¯•è¶…æ—¶å¤„ç†

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
FlashSaleMall/
â”œâ”€â”€ src/                    # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ stores/            # ZustandçŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ ...
â”œâ”€â”€ backend-spring/        # Spring Bootåç«¯
â”‚   â”œâ”€â”€ src/main/java/     # ä¸šåŠ¡ä»£ç ï¼ˆController/Repository/Configï¼‰
â”‚   â”œâ”€â”€ src/main/resources # é…ç½®ï¼ˆapplication.ymlï¼‰
â”‚   â”œâ”€â”€ src/test/java/     # æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ Dockerfile         # ç”Ÿäº§å®¹å™¨é•œåƒï¼ˆå«SkyWalking Agentï¼‰
â”œâ”€â”€ docker-compose.yml    # DockeræœåŠ¡é…ç½®
â””â”€â”€ ...
```

### å¸¸ç”¨å¼€å‘ä¸è¿ç»´å‘½ä»¤
```bash
# å‰ç«¯å¼€å‘
npm install && npm run dev

# åç«¯å®¹å™¨
docker compose up -d backend
docker compose logs -f backend

# åŸºç¡€è®¾æ–½ä¸ç›‘æ§
docker compose up -d mysql redis zookeeper kafka prometheus grafana loki promtail oap skywalking-ui

# å…³é—­æœåŠ¡
docker compose down
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **JWTè®¤è¯** - Spring Security + JWT
- **å¯†ç åŠ å¯†** - BCryptPasswordEncoder
- **é¢‘ç‡é™åˆ¶** - Redisè®¡æ•°å™¨å®ç°ï¼ˆ10ç§’3æ¬¡ï¼‰
- **è¾“å…¥éªŒè¯** - æ§åˆ¶å™¨å±‚å‚æ•°æ ¡éªŒ
- **é”™è¯¯å¤„ç†** - Spring å…¨å±€å¼‚å¸¸å¤„ç†ï¼ˆç»Ÿä¸€å“åº”æ ¼å¼ï¼‰

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **Redisç¼“å­˜** - å•†å“ä¿¡æ¯å’Œåº“å­˜ç¼“å­˜
- **æ•°æ®åº“è¿æ¥æ± ** - HikariCP è¿æ¥æ± 
- **å¼‚æ­¥å¤„ç†** - Kafkaå¼‚æ­¥æ¶ˆæ¯
- **å‰ç«¯ä¼˜åŒ–** - ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

---

# ğŸ¤– Deep SRE Agent

Deep SRE Agent æ˜¯ä¸€ä¸ªåŸºäº LLM å’Œ MCP (Model Context Protocol) æ„å»ºçš„æ™ºèƒ½è¿ç»´ä»£ç†ï¼Œæ—¨åœ¨è¾…åŠ© SRE å›¢é˜Ÿè¿›è¡Œæ•…éšœæ’æŸ¥ã€æ ¹å› åˆ†æå’Œç³»ç»Ÿæ¢å¤ã€‚å®ƒèƒ½å¤Ÿé€šè¿‡è‡ªç„¶è¯­è¨€ä¸ç³»ç»Ÿä¸­çš„ç›‘æ§ã€æ—¥å¿—ã€æ•°æ®åº“ç­‰ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚

## ï¿½ æ ¸å¿ƒæ¶æ„

Deep SRE Agent é‡‡ç”¨ Orchestrator-Workers æ¨¡å¼ï¼Œç”±ä¸» Agent åè°ƒå¤šä¸ªä¸“æ³¨äºç‰¹å®šé¢†åŸŸçš„ Sub-Agentsï¼š

- **Wiki Agent**: çŸ¥è¯†åº“ä¸“å®¶ï¼Œåˆ†æç³»ç»Ÿæ¶æ„æ–‡æ¡£ï¼Œæä¾›æ•…éšœæ’æŸ¥æ€è·¯ã€‚
- **Log Agent**: æ—¥å¿—åˆ†æä¸“å®¶ï¼Œé€šè¿‡ Loki MCP æŸ¥è¯¢å’Œåˆ†æåº”ç”¨æ—¥å¿—ã€‚
- **Prometheus Agent**: æŒ‡æ ‡ç›‘æ§ä¸“å®¶ï¼Œé€šè¿‡ Prometheus MCP æŸ¥è¯¢ PromQL å¹¶åˆ†æç³»ç»Ÿå¥åº·åº¦ã€‚
- **MySQL Agent**: æ•°æ®åº“ä¸“å®¶ï¼Œé€šè¿‡ DBHub/MySQL MCP æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œæ’æŸ¥æ•°æ®é—®é¢˜ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (SRE Agent)

### 1. ç¯å¢ƒå‡†å¤‡

SRE Agent ä½¿ç”¨ Python ç¼–å†™ï¼Œæ¨èä½¿ç”¨ [uv](https://docs.astral.sh/uv/) è¿›è¡ŒåŒ…ç®¡ç†ã€‚

```bash
# å®‰è£… uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# è¿›å…¥ agent ç›®å½•
cd deep_sre_agent

# å®‰è£…ä¾èµ–
uv sync
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶å¹¶é…ç½® API Keyï¼š

```bash
cp .env.example .env.dev
```

ä½ éœ€è¦é…ç½®ä»¥ä¸‹å…³é”®å˜é‡ï¼š
- `ANTHROPIC_API_KEY`: ç”¨äº Claude æ¨¡å‹ (æˆ–å…¶ä»–æ”¯æŒçš„ LLM)
- `TAVILY_API_KEY`: ç”¨äº Web æœç´¢ï¼ˆå¯é€‰ï¼‰
- `LANGSMITH_API_KEY`: ç”¨äº LangSmith è¿½è¸ªï¼ˆå¯é€‰ï¼‰
- `DEEPSEEK_API_KEY`: ç”¨äº DEEPSEEK_API_KEY å¤§æ¨¡å‹

### 3. å¯åŠ¨ MCP æœåŠ¡

ç¡®ä¿ `docker-compose.yml` ä¸­çš„ MCP æœåŠ¡å·²å¯åŠ¨ï¼ˆè¿™äº›æœåŠ¡å……å½“ Agent ä¸åŸºç¡€è®¾æ–½ä¹‹é—´çš„æ¡¥æ¢ï¼‰ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼Œå¯åŠ¨æ‰€æœ‰ MCP é€‚é…å™¨æœåŠ¡
docker compose up -d prometheus-mcp skywalking-mcp dbhub loki-mcp
```

### 4. è¿è¡Œ Agent

ä½ å¯ä»¥é€šè¿‡ Jupyter Notebook äº¤äº’å¼è¿è¡Œï¼Œæˆ–è€…å¯åŠ¨ LangGraph Serverã€‚

#### æ–¹å¼ A: Jupyter Notebook (æ¨èç”¨äºè°ƒè¯•/æ¼”ç¤º)

```bash
uv run jupyter notebook research_agent.ipynb
```

#### æ–¹å¼ B: LangGraph Server

```bash
langgraph dev
```

## ğŸ› ï¸ Agent å¼€å‘æŒ‡å—

### Agent é¡¹ç›®ç»“æ„

```
deep_sre_agent/
â”œâ”€â”€ agent.py              # ä¸» Agent å…¥å£ä¸ç¼–æ’é€»è¾‘
â”œâ”€â”€ log_agent/            # æ—¥å¿—åˆ†æå­ Agent
â”œâ”€â”€ mysql_agent/          # æ•°æ®åº“å­ Agent
â”œâ”€â”€ prometheus_agent/     # ç›‘æ§æŒ‡æ ‡å­ Agent
â”œâ”€â”€ wiki_agent/           # çŸ¥è¯†åº“å­ Agent
â”œâ”€â”€ research_agent.ipynb  # äº¤äº’å¼è¿è¡Œç¬”è®°æœ¬
â”œâ”€â”€ pyproject.toml        # ä¾èµ–é…ç½®
â””â”€â”€ .env.dev              # ç¯å¢ƒå˜é‡é…ç½®
```

### æ·»åŠ æ–°çš„ Tool/Agent

1.  åœ¨ `deep_sre_agent/` ä¸‹åˆ›å»ºæ–°çš„ agent ç›®å½•ã€‚
2.  å®šä¹‰ `mcp_client.py` ä»¥è¿æ¥å¤–éƒ¨ MCP æœåŠ¡ã€‚
3.  ç¼–å†™ `tools.py` å°è£… MCP è°ƒç”¨ã€‚
4.  åœ¨ `agent.py` ä¸­æ³¨å†Œæ–°çš„ sub-agentã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT åè®®å¼€æº - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- React å›¢é˜Ÿæä¾›ä¼˜ç§€çš„å‰ç«¯æ¡†æ¶
- Spring Boot å›¢é˜Ÿæä¾›ä¼ä¸šçº§åç«¯æ¡†æ¶
- TailwindCSS å›¢é˜Ÿæä¾›ä¼˜é›…çš„æ ·å¼è§£å†³æ–¹æ¡ˆ
- LangChain / LangGraph å›¢é˜Ÿæä¾›ä¼˜ç§€çš„ Agent æ¡†æ¶
- æ‰€æœ‰ä¸ºå¼€æºç¤¾åŒºè´¡çŒ®çš„å¼€å‘è€…ä»¬

---

**âš¡ Flash Sale Mall - è®©ç§’æ€æ›´ç®€å•ï¼Œè®©æµ‹è¯•æ›´é«˜æ•ˆï¼**
